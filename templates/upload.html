<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload Folder</title>
    <!-- Bootstrap & FontAwesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        body {
            background: linear-gradient(135deg, #232946 0%, #0a192f 100%);
            font-family: 'Arial', sans-serif;
            color: #ccd6f6;
            transition: background 0.5s ease;
        }
        .navbar {
            background-color: #112240;
            padding: 10px 20px;
            box-shadow: 0 2px 16px rgba(0,0,10,0.45);
            border-radius: 0 0 14px 14px;
            animation: slideDown 1s;
        }
        .navbar img {
            width: 80px;
            filter: drop-shadow(0 4px 6px #0a192f66);
            transition: transform 0.3s;
        }
        .navbar img:hover { transform: scale(1.06) rotate(-2deg); }
        .container {
            margin-top: 53px;
            min-height: 70vh;
            animation: fadeInUp 1s;
        }
        .card {
            padding: 28px;
            border-radius: 20px;
            box-shadow: 0 4px 16px 0 #0005, 0 1.5px 4px 0 #00bcd455;
            background: rgba(17,34,64,0.96);
            border: 1.5px solid #305081;
            animation: fadePop 1.15s;
            transition: box-shadow 0.2s;
        }
        .btn-custom {
            background: linear-gradient(90deg, #00bcd4 30%, #0097a7 90%);
            color: #0a192f;
            font-weight: bold;
            padding: 11px 26px;
            border: none;
            border-radius: 28px;
            box-shadow: 0 0 5px #00bcd4cc;
            transition: background 0.3s, box-shadow 0.3s, transform 0.2s;
        }
        .btn-custom:hover {
            background: linear-gradient(90deg, #0097a7 30%, #00bcd4 90%);
            transform: scale(1.07);
            box-shadow: 0 0 10px #00bcd499;
        }
        .upload-area {
            border: 2.5px dashed #298ca9;
            border-radius: 18px;
            padding: 26px;
            text-align: center;
            cursor: pointer;
            transition: background 0.3s, border-color 0.3s;
            background: rgba(22,32,61,0.92);
            animation: flashBorder 1.6s infinite linear;
            position: relative;
        }
        .upload-area:hover {
            background: #1f4068cc;
            border-color: #00bcd4;
        }
        .upload-icon {
            font-size: 2.8rem;
            color: #00bcd4;
            margin-bottom: 18px;
            transition: color 0.3s;
            animation: floatIcon 1.5s infinite alternate;
        }
        .upload-area:hover .upload-icon {
            color: #0097a7;
        }
        .upload-instructions {
            font-size: 1.08rem;
            color: #7f98b6;
            margin-bottom: 15px;
            letter-spacing: 0.5px;
            animation: fadeInText 1.2s;
        }
        .file-input { display: none; }
        .selected-folder {
            margin-top: 15px;
            text-align: left;
            display: none;
            animation: fadeInText 0.8s;
        }
        .selected-folder p {
            background: #182c47;
            padding: 11px;
            border-radius: 7px;
            color: #ccd6f6;
            font-weight: bold;
            box-shadow: 0 2px 6px #00bcd4b0;
        }
        h1 {
            font-weight: 900;
            margin-bottom: 18px;
            letter-spacing: 1px;
            text-shadow: 1px 2px 4px #00bcd4aa;
        }
        /* Animations */
        @keyframes fadeInUp { 0%{opacity:0;transform:translateY(40px);}100%{opacity:1;transform:translateY(0);} }
        @keyframes fadePop { 0%{opacity:0;transform:scale(0.85);}100%{opacity:1;transform:scale(1);} }
        @keyframes slideDown { 0%{opacity:0;transform:translateY(-50px);}100%{opacity:1;transform:translateY(0);} }
        @keyframes flashBorder {0%,100%{border-color:#298ca9;}50%{border-color:#00bcd4;} }
        @keyframes fadeInText {0%{opacity:0;}100%{opacity:1;} }
        @keyframes floatIcon {0%{transform:translateY(0);}100%{transform:translateY(-8px);} }
    </style>
</head>
<body>
<nav class="navbar">
    <a class="navbar-brand" href="/">
        <img src="https://user-gen-media-assets.s3.amazonaws.com/seedream_images/4c4afc19-b52b-4a44-86e9-abd1c281937e.png" alt="Logo" style="height:52px;">
    </a>
</nav>
<div class="container">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card text-center">
                <h1>Upload Chest X-ray Images</h1>
                <form action="/upload" method="post" enctype="multipart/form-data" id="upload-form">
                    <div class="upload-area" id="upload-area" onclick="document.getElementById('file-input').click()">
                        <div class="upload-icon">
                            <i class="fas fa-cloud-upload-alt"></i>
                        </div>
                        <div class="upload-instructions">
                            Click to upload or drag and drop your X-ray images (PNG, JPG, JPEG)
                        </div>
                    </div>
                    <input type="file" id="file-input" name="folder" class="file-input" accept=".png, .jpg, .jpeg" webkitdirectory multiple required>
                    <div class="selected-folder" id="selected-folder">
                        <h5>Selected Folder:</h5>
                        <p id="folder-name"></p>
                    </div>
                    <div class="text-center" style="margin-top: 20px;">
                        <button type="submit" class="btn btn-custom btn-lg shadow-none">
                            <i class="fas fa-upload"></i> Upload and Analyze
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<script>
    // Extract folder name from file path
    function getFolderName(filePath) {
        const parts = filePath.split('/');
        return parts[parts.length - 2];
    }
    document.getElementById('file-input').addEventListener('change', function(event) {
        const files = event.target.files;
        if (files.length > 0) {
            const folderName = getFolderName(files[0].webkitRelativePath || files[0].name);
            document.getElementById('folder-name').textContent = folderName;
            document.getElementById('selected-folder').style.display = 'block';
        }
    });
    document.getElementById('upload-form').addEventListener('submit', function(event) {
        const fileInput = document.getElementById('file-input');
        if (fileInput.files.length === 0) {
            event.preventDefault();
            alert('Please select at least one file.');
        }
    });
    // Drag-and-drop visual feedback
    const uploadArea = document.getElementById('upload-area');
    uploadArea.addEventListener('dragenter', function() {
        uploadArea.style.background = '#1f4068ee';
    });
    uploadArea.addEventListener('dragleave', function() {
        uploadArea.style.background = '';
    });
    uploadArea.addEventListener('dragover', function(e) {
        e.preventDefault();
        uploadArea.style.background = '#1f4068ee';
    });
    uploadArea.addEventListener('drop', function(e) {
        e.preventDefault();
        document.getElementById('file-input').files = e.dataTransfer.files;
        uploadArea.style.background = '';
        if (e.dataTransfer.files.length > 0) {
            const folderName = getFolderName(e.dataTransfer.files[0].webkitRelativePath || e.dataTransfer.files[0].name);
            document.getElementById('folder-name').textContent = folderName;
            document.getElementById('selected-folder').style.display = 'block';
        }
    });
</script>
</body>
</html>
